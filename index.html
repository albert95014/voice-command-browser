<!DOCTYPE html>
<html>
<head>
<title>Example of Speech Recognition</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>
	$(document).ready(function() {

		if (!('webkitSpeechRecognition' in window)) {
			upgrade();
		} else {
			var recognition = new webkitSpeechRecognition();
			recognition.continuous = true;
			recognition.interimResults = true;

			recognition.onstart = function() {};
			recognition.onresult = function(event) {};
			recognition.onerror = function(event) {};
			recognition.onend = function() {};
		}

		function startButton(event) {
			...
			final_transcript = '';
			recognition.lang = select_dialect.value;
			recognition.start();
		}

		$(".recordbutton").click(function() {
			startButton();
		});


		$("#commandbutton").click(function() {
			startButton();
			var potentialcommand = $("#command").val();

			console.log(potentialcommand);

			var re = /^(click|scroll|enter)\s(.*)/i;
			var result = re.exec(potentialcommand);

			if(result) {
			var verb = result[1];
			var arg = result[2]

			console.log("verb: " + verb + ", args: " + arg);

			switch(verb) {
				case "click":
				  // what do we do if click?
				  console.log("handling click")

				  //console.log($("*:contains('" + arg + "')"));

				  var stringpieces = arg.split(/\s/);

				  $("a,input,button").each(function() {
				    if($(this)[0].tagName == "INPUT") {
				    	// look for the text in INPUT fields
				    } else if($(this[0].tagName == "A")) {


				    }
				  });

				  break;
				case "scroll":
				  // what do we do on scroll?
				  console.log("handling scroll`")
				  break;
				case "enter":
				  // what do we do on enter?
				  console.log("handling enter")
				  break;
				default:
				  console.log("sorry, that is not a recognized command")
			}


			//console.log("Scroll " + result[1]);
			//if(result[1]=="up") {
				// scroll up
			//} else if(result[1]=="down") {
				// scroll down
			//}
			}

		})
	});
</script>


<style>
	body {
		height: 2500px;
	}
</style>
</head>

<body>
	<p>
		<input type="text" id="command"><input type="button" value="Do something!" id="commandbutton">
	</p>

	<p>
		<input class="recordbutton" type="button" value="cat"><br>
		<a href="google.com">Google</a><br>
		<a href="cmu.edu">CMU</a><br>
	</p>
</body>
</html>